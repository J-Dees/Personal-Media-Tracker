# API Specification

## Table of contents

### User Functions
- `/users` (GET)
- `/users` (POST)
- `/users/{user_name}` (GET)
- `/users/{user_id}` (DELETE)

### Following
- `/users/{user_id}/followees` (GET)
- `/users/{user_id}/followees` (POST)
- `/users/{user_id}/followees/catalogs` (GET)
- `/users/{user_id}/followees/entries` (GET)
- `/users/{user_id}/followees/follow-recommendations` (GET)
- `/users/{user_id}/followees/{user_name}` (DELETE)

### Catalogs
- `/users/{user_id}/catalogs` (GET)
- `/users/{user_id}/catalogs` (POST)
- `/users/{user_id}/catalogs/{catalog_id}` (PUT)
- `/users/{user_id}/catalogs/{catalog_id}` (DELETE)

### games
- `/games` (GET)

### game_entries
- `/users/{user_id}/catalogs/{catalog_name}/game-entries` (GET)
- `/users/{user_id}/catalogs/{catalog_name}/game-entries` (POST)
- `/users/{user_id}/catalogs/{catalog_name}/game-entries/{entry_title}` (PUT)
- `/users/{user_id}/catalogs/{catalog_name}/game-entries/{entry_title}` (DELETE)

### movies
- `/movies` (GET)

### movies_entries
- `/users/{user_id}/catalogs/{catalog_name}/movie-entries` (GET)
- `/users/{user_id}/catalogs/{catalog_name}/movie-entries` (POST)
- `/users/{user_id}/catalogs/{catalog_name}/movie-entries/{entry_title}` (PUT)
- `/users/{user_id}/catalogs/{catalog_name}/movie-entries/{entry_title}` (DELETE)

### books
- `/books` (GET)

### book_entries
- `/users/{user_id}/catalogs/{catalog_name}/book-entries` (GET)
- `/users/{user_id}/catalogs/{catalog_name}/book-entries` (POST)
- `/users/{user_id}/catalogs/{catalog_name}/book-entries/{entry_title}` (PUT)
- `/users/{user_id}/catalogs/{catalog_name}/book-entries/{entry_title}` (DELETE)

### other_entries
- `/users/{user_id}/catalogs/{catalog_name}/other-entries` (GET)
- `/users/{user_id}/catalogs/{catalog_name}/other-entries` (POST)
- `/users/{user_id}/catalogs/{catalog_name}/other-entries/{entry_title}` (PUT)
- `/users/{user_id}/catalogs/{catalog_name}/other-entries/{entry_title}` (DELETE)

### Admin
- `/admin/reset` (POST)

# **user functions**

## `/users` (GET)

Searches all users, optionally filtered by name. This can be used to help find people to follow.

**Query Parameters**

- `page`: Specific page of results to query (Default: 1)
- `name`: (Optional) Filter results by name
- `direction`: Display results in either alphebetical order (`asc`) or reverse alphebetical order (`desc`) (Default: `asc`)

**Response**

A JSON response is produced with the following information:
- `page`: Query page of results (limited to 25)
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the catalogs returned by the query
  - `name`: Name of the user.

## `/users` (POST)

Create a new user account with the specified unique name. gives status feedback for success or any errors. Once created, the new user may login to fetch their unique user id.

**Request**:

```json
{
  "username": "string"
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_name}` (GET)

Returns the user_id of the username passed in. When making calls with a user_id it un-restricts all private catalogs and entries. Also allows for appending and deleting catalogs and entries. (This is our method of logging in as a user, alternatively users can be searched by `GET /users`)

**Request**:

```json
{
  "name": "string"
}
```

**Response**:

```json
{
  "user_id": "UUID"
}
```

## `/users/{user_id}` (DELETE)

Delete user_id's account and all information related to it. Gives a confirmation or warning.

**Request**:

```json
{
  "user_id": "UUID"
}
```

**Response**:

```
HTTP 204 No Content
```

# **following**

## `/users/{user_id}/followees` (GET) 

Gets a list of all users that user_id is following. The list will have 25 entries per page.

**Query Parameters**:

- `page`: Specific page of results to query. (Default: 1)
- `name`: (Optional) Filter results by name.
- `direction`:Display results in either alphebetical order (`asc`) or reverse alphebetical order (`desc`). (Default: `asc`)
**Response**:

A JSON response is produced with the following information:
- `page`: Query page of results (limited to 25)
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the catalogs returned by the query
  - `name`: A person that user_id is following.

## `/users/{user_id}/followees` (POST) 

Adds the user by username to user_id’s following list.

**Request**:

```json
{
 "user_name": "string"
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_id}/followees/catalogs` (GET)

Returns all public catalogs from follower_name

**Query Parameters**

- `name` (optional): A username in the user's following list
- `catalog_name` (optional): The specific name of a catalog
- `direction` (optional): The order in which to display the results (`asc` or `desc`, default: `asc`)
- `page` (optional): A specific page of catalogs in the query (default: 1)

**Response**:

A JSON response is produced with the following information:
- `page`: Query page of results (limited to 25)
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the catalogs returned by the query
  - `user`: The owner of the catalog.
  - `catalog_name`: The name of the catalog. 
  - `type`: The type of catalog. either 'movies', 'books', 'games', or 'other'.

## `/users/{user_id}/followees/entries` (GET)

Returns all entries in a followed user's public catalog where the recommend attribute is true.

**Query Parameters**

- `page` (optional): A specific page of catalogs in the query (default: 1)
- `following_name` (optional): A username in the user's following list
- `catalog` (optional): The specific name of a catalog
- `title` (optional): Filter by entry title
- `order_by` (optional): Attribute in which to order the results by
- `direction` (optional): The direction in which to order the results (`asc` or `desc`, default: `asc`)


**Response**:

A JSON response is produced with the following information:
- `page`: Query page of results (limited to 25)
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the entries returned by the query
  - `user`: The user the entry is under.
  - `catalog`: The catalog the entry is in. 
  - `title`: The title of the entry. 
  - Other details vary on the type of entry searched for.

## `/users/{user_id}/followees/follow-recommendations` (GET)

Return a list of recommended users for user_id to follow. This list of recommendations is based on who you follow and who other people with similar follow lists follow. If you are not following anyone then a list of the top 10 most followed people is shown as recommendations.

**Response**:

```json
[
  {
    "recommendation": "string: username"
  }
]
```

## `/users/{user_id}/followees/{user_name}` (DELETE)

Delete the user by name from user_id's follow list.

**Request**:

```json
{
  "follower_name": "string"
}
```

**Response**:

```
HTTP 204 No Content
```

# **catalogs**

## `/users/{user_id}/catalogs` (GET)

Searches through a user’s catalogs using (optional) specified queries.

**Query Parameters**:

- `page` (optional): A specific page of catalogs in the query (Default: 1)
- `type` (optional): The type of catalog.
- `order_by` (optional): A column to sort the results by (either `id` or `name`, default: `name`)
- `direction` (optional): The order in which to display the results (`asc` or `desc`, default: `asc`)

**Response**:

A JSON response is produced with the following information:
- `page`: Query page of results (limited to 25)
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `results`: An array of JSON objects representing the catalogs returned by the query
  - `name`: The name of the catalog. 
  - `type`: The type of entries for the catalog.
  - `private`: `true` means the catalog is private and `false` means the catalog is public.

## `/users/{user_id}/catalogs` (POST)

Creates a catalog for user_id. The request body has all the fields to be filled in for the catalog.

**Request**:

```json
{
  "title": "string",
  "type": "string", /* good values are “movies”, “books”, “games”, or "other" */
  "private": "boolean" /* true for private catalog, false for public */
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_id}/catalogs/{catalog_id}` (PUT)

Used to update the name or privacy of a catalog.

**Request**:

```json
{
  "name": "string",
  "private": "boolean"
}
```

**Response**:

```
HTTP 202 Accepted
```

## `/users/{user_id}/catalogs/{catalog_id}` (DELETE)

Deletes the specified catalog by id from a user’s list of catalogs.

**Response**:

```
HTTP 204 No Content
```

# **games**

## `/games` (GET)

Searches the games database for video game metadata.

**Query Parameters**:

- `page`: Desired page of results to display. Each page is limited to 25 results. (Default: 1)
- `game_title` (optional): Search for a game that contains the entered value.
- `year` (optional): The year of a title (useful for when games have the same title).
- `sort_col`: The attribute to order results by. (Default: `game_title`)

**Response**:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by the response.
- `content`: An array of JSON objects representing the games returned by the query
  - `game_title`: Title of the game.
  - `year`: Year the game was released.

# **game_entries**

## `/users/{user_id}/catalogs/{catalog_name}/game-entries` (GET)

Gets a list of both public and private entries in catalog_name under user_id. The list will have 50 entries per page. Search is sorted based on the query parameter.

**Query Parameters**:

- `page` (optional): The page number of the result. Each page is limited to 25 results. (Default: 1)
- `opinion` (optional): Search for opinions containing a specific string.
- `order_by` (optional) the column to sort results by. Possible values: (Default) `title`, `relevant date`, `rating`
- `direction` (optional) The sort order of the result. Possible values: (Default) `asc`, `desc`

**Response**:

JSON object of the following:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `results`: An array of JSON objects representing the entries returned by the query
  - `game_title`: Title of the game.
  - `private`: Whether followers can see this entry.
  - `recommend`: Boolean.
  - `rating`: Rating of 1-10.
  - `hours_played`: Number of hours played.
  - `play_again`: Would you play again.
  - `opinion`: Any miscellaneous opinions on the game.

## `/users/{user_id}/catalogs/{catalog_name}/game-entries` (POST)

Creates an entry for user_id in catalog_name. The request body has all the fields to be filled in for the entry.

**Request**:

```json
{
  "title": "string",
  "year": "int",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "hours_played": "float",
  "play_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_id}/catalogs/{catalog_name}/game-entries/{entry_title}` (PUT)

Updates the entry entry_title in catalog_name under user_id with any of the fields (optional) that are to be updated. The last modified attribute will be updated to the current time for each usage of the PUT request.

**Request**:

```json
{
  "opinion": "string",
  "rating": "float",
  "hours_played": "float",
  "play_again": "boolean"
}
```

**Response**:

```
HTTP 202 Accepted
```

## `/users/{user_id}/catalogs/{catalog_name}/game-entries/{entry_title}` (DELETE) 

Deletes the entry under user_id in catalog_name with the title entry_title.

**Response**:

```
HTTP 204 No Content
```

# **movies**

## `/movies` (GET)

Searches the movies database for movie metadata.

**Query Parameters**:

- `page`: Desired page of results to display. Each page is limited to 25 results. (Default: 1)
- `movie_title` (optional): Search for a movie that contains the entered value
- `year` (optional): The year of a title (useful for when movies have the same title)
- `sort_col`: The attribute to order results by (Default: `movie_title`)

**Response**:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the movies returned by the query
  - `movie_title`: Title of the movie. 
  - `year`: Year the movie was released.

# **movie_entries**

## `/users/{user_id}/catalogs/{catalog_name}/movie-entries` (GET)

Gets a list of both public and private entries in catalog_name under user_id. The list will have 50 entries per page. Search is sorted based on the query parameter.

**Query Parameters**:

- `page` (optional): The page number of the result. (Default: 1)
- `opinion` (optional): Search for opinions containing a specific string.
- `order_by` (optional) the column to sort results by. Possible values: (Default) `title`, `relevant date`, `rating`
- `direction` (optional) The sort order of the result. Possible values: (Default) `asc`, `desc`

**Response**:

JSON object of the following:

A JSON response is produced with the following information:
- `page`: The page of results queried. Limited to 25 results per page.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `results`: An array of JSON objects representing the entries returned by the query
  - `movie_title`: Title of the movie.
  - `private`: Wether others can see this entry.
  - `recommend`: Boolean.
  - `rating`: Rating of 1-10.
  - `date_seen`: Date that the movie was watched.
  - `watch_again`: Would you watch the movie again.
  - `opinion`: Any miscellaneous opinions on the movie.


## `/users/{user_id}/catalogs/{catalog_name}/movie-entries` (POST)

Creates an entry for user_id in catalog_name. The request body has all the fields to be filled in for the entry.

**Request**:

```json
{
  "title": "string",
  "year": "int",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "date_seen": "timestamp",
  "watch_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_id}/catalogs/{catalog_name}/movie-entries/{entry_title}` (PUT)

Updates the entry entry_title in catalog_name under user_id with any of the fields (optional) that are to be updated. The last modified attribute will be updated to the current time for each usage of the PUT request.

**Request**:

```json
{
  "opinion": "string",
  "rating": "float",
  "date_seen": "timestamp",
  "watch_again": "boolean"
}
```

**Response**:

```
HTTP 202 Accepted
```

## `/users/{user_id}/catalogs/{catalog_name}/movie-entries/{entry_title}` (DELETE) 

Deletes the entry under user_id in catalog_name with the title entry_title.

**Response**:

```
HTTP 204 No Content
```

# **books**

## `/books` (GET)

Searches the books database for book metadata.

**Query Parameters**:

- `page` (optional): Desired page of results to display. Each page is limited to 25 results. (Default: 1)
- `book_title` (optional): Search for a book that contains the entered value
- `author` (optional): The author of a title
- `sort_col`: The attribute to order results by (Default: `book_title`)

**Response**:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `content`: An array of JSON objects representing the books returned by the query
  - `book_title`: Title of the book.
  - `author`: Author of the book.

# **book_entries**

## `/users/{user_id}/catalogs/{catalog_name}/book-entries` (GET)

Gets a list of both public and private entries in catalog_name under user_id. The list will have 50 entries per page. Search is sorted based on the query parameter.

**Query Parameters**:

- `page` (optional): The page number of the result. (Default: 1)
- `opinion` (optional): Search for opinions containing a specific string.
- `order_by` (optional) the column to sort results by. Possible values: (Default) `title`, `relevant date`, `rating`
- `direction` (optional) The sort order of the result. Possible values: (Default) `asc`, `desc`

**Response**:

JSON object of the following:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `results`: An array of JSON objects representing the entries returned by the query
  - `book_title`: Title of the book.
  - `private`: Wether other users can see this entry.
  - `recommend`: Wether you would recommend the book to others.
  - `rating`: Rating of 1-10
  - `date_read`: The date that you read the book.
  - `read_again`: Would you read the book again.
  - `opinion`: Any other opinions about the book.

## `/users/{user_id}/catalogs/{catalog_name}/book-entries` (POST)

Creates an entry for user_id in catalog_name. The request body has all the fields to be filled in for the entry.

**Request**:

```json
{
  "title": "string",
  "author": "string",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "date_read": "timestamp",
  "read_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Response**:

```
HTTP 201 Created
```

## `/users/{user_id}/catalogs/{catalog_name}/book-entries/{entry_title}` (PUT)

Updates the entry entry_title in catalog_name under user_id with any of the fields (optional) that are to be updated. The last modified attribute will be updated to the current time for each usage of the PUT request.

**Request**:

```json
{
  "opinion": "string",
  "rating": "float",
  "read_again": "boolean"
}
```

**Response**:

```
HTTP 202 Accepted
```

## `/users/{user_id}/catalogs/{catalog_name}/book-entries/{entry_title}` (DELETE) 

Deletes the entry under user_id in catalog_name with the title entry_title.

**Response**:

```
HTTP 204 No Content
```

# **other_entries**

## `/users/{user_id}/catalogs/{catalog_name}/other-entries` (GET)

Gets a list of both public and private entries in catalog_name under user_id. The list will have 50 entries per page. Search is sorted based on the query parameter.

**Query Parameters**:

- `page` (optional): Desired page of results to display. Each page is limited to 25 results. (Default: 1)
- `opinion` (optional): Search for opinions containing a specific string.
- `order_by` (optional) the column to sort results by. Possible values: (Default) `title`, `relevant date`, `rating`
- `direction` (optional) The sort order of the result. Possible values: (Default) `asc`, `desc`

**Response**:

JSON object of the following:

A JSON response is produced with the following information:
- `page`: The page of results queried.
- `max_page`: The maximum page of results determined by the amount of objects generated by a response
- `results`: An array of JSON objects representing the entries returned by the query
  - The entries will be listed by all relevant information according to the type of entries

## `/users/{user_id}/catalogs/{catalog_name}/other-entries` (POST)

Creates an entry for user_id in catalog_name. The request body has all the fields to be filled in for the entry.

**Request**:

```json
{
  "title": "string",
  "description": "string",
  "price": "float", /*valuation for collectors items*/
  "quality": "string",
  "date_obtained": "timestamp",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Response**:

`HTTP 201 Created`

## `/users/{user_id}/catalogs/{catalog_name}/other-entries/{entry_title}` (PUT)

Updates the entry entry_title in catalog_name under user_id with any of the fields (optional) that are to be updated. The last modified attribute will be updated to the current time for each usage of the PUT request.

**Request (type=other)**:

```json
{
  "description": "string",
  "price": "float",
  "quality": "string"
}
```

**Response**:

`HTTP 202 Accepted`

## `/users/{user_id}/catalogs/{catalog_name}/other-entries/{entry_title}` (DELETE) 

Deletes the entry under user_id in catalog_name with the title entry_title.

**Response**:

```
HTTP 204 No Content
```

# **admin**

## `/admin/reset`

Resets the state of the database and loads in all movie, game, and book metadata. (Do not use this in practicality)

**Response**:

`HTTP 200 OK`