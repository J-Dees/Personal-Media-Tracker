# API Specification

## Table of contents

### User Functions
- `/users` (GET)
- `/users` (DELETE)
- `/users` (POST)
- `/users/search` (GET)

### Entries
- `/entries/{type}/{user_id}/{catalog_name}` (POST)
- `/entries/{type}/{user_id}/{catalog_name}` (GET)
- `/entries/{type}/{user_id}/{catalog_name}/{entry_title}` (PUT)
- `/entries/{type}/{user_id}/{catalog_name}` (DELETE)

### Catalogs
- `/catalogs/{user_id}` (POST)
- `/catalog/{user_id}/search` (GET)
- `/catalog/{user_id}` (DELETE)
- `/catalog/{user_id}/{catalog_id}` (PUT)

### Following
- `/following/{user_id}` (GET)
- `/following/{user_id}` (POST)
- `/following/{user_id}` (DELETE)
- `/following/{user_id}/search_catalogs` (GET)
- `/following/{user_id}/search_entries` (GET)
- `/following/{user_id}/follow_recommendations` (GET)

## Querying Data for New Entries
- `/games/search` (GET)
- `/movies/search` (GET)
- `/books/search` (GET)

## Admin
- `/admin/reset` (POST)
- `/admin/load` (POST)

# User Functions

### `/users` (GET)

Returns the user_id of the username passed in. When making calls with a user_id it un-restricts all private catalogs and entries. Also allows for appending and deleting catalogs and entries. (This is our method of logging in as a user, alternatively users can be searched by `/users/search`)

**Request**:

```json
{
  "name": "string"
}
```

**Response**:

```json
{
  "user_id": "UUID"
}
```

### `/users` (DELETE)

Delete user_id's account and all information related to it. Gives a confirmation or warning.

**Request**:

```json
{
  "user_id": "UUID"
}
```

**Response**:

`HTTP 204 No Content`

### `/users` (POST)

Create a new user account with the specified unique name. gives status feedback for success or any errors. Once created, the new user may login to fetch their unique user id.

**Request**:

```json
{
  "username": "string"
}
```

**Response**:

`HTTP 201 Created`

### `/users/search` (GET)

Searches all users, optionally filtered by name. This can be used to help find people to follow.

**Query Parameters**

- `page`: Specific page of results to query (Default: 1)
- `name`: (Optional) Filter results by name
- `direction`: Alphabetical order to display results in by name (`asc` or `desc`)

**Response**

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`content`: An array of JSON objects representing the catalogs returned by the query
The users will be listed by `name`

# Entries

#### {type} refers to the type of entry for a catalog; either games, movies, books, or other

### `/entries/{type}/{user_id}/{catalog_name}` (POST)

Creates an entry for user_id in catalog_name. The request body has all the fields to be filled in for the entry.

**Request (type=movies)**:

```json
{
  "title": "string",
  "year": "int",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "date_seen": "timestamp",
  "watch_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Request (type=games)**:

```json
{
  "title": "string",
  "year": "int",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "hours_played": "float",
  "play_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Request (type=books)**:

```json
{
  "title": "string",
  "author": "string",
  "opinion": "string",
  "rating": "float", /*rating out of 10*/
  "date_read": "timestamp",
  "read_again": "boolean",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Request (type=other)**:

```json
{
  "title": "string",
  "description": "string",
  "price": "float", /*valuation for collectors items*/
  "quality": "string",
  "date_obtained": "timestamp",
  "recommend": "boolean",
  "private": "boolean"
}
```

**Response**:

`HTTP 201 Created`

### `/entries/{type}/{user_id}/{catalog_name}/{entry_title}` (PUT)

Updates the entry entry_title in catalog_name under user_id with any of the fields (optional) that are to be updated. The last modified attribute will be updated to the current time for each usage of the PUT request.

**Request (type=movies)**:

```json
{
  "opinion": "string",
  "rating": "float",
  "date_seen": "timestamp",
  "watch_again": "boolean"
}
```

**Request (type=games)**:

```json
{
  "opinion": "string",
  "rating": "float",
  "hours_played": "float",
  "play_again": "boolean"
}
```

**Request (type=books)**:

```json
{
  "opinion": "string",
  "rating": "float",
  "read_again": "boolean"
}
```

**Request (type=other)**:

```json
{
  "description": "string",
  "price": "float",
  "quality": "string"
}
```

**Response**:

`HTTP 202 Accepted`

### `/entries/{type}/{user_id}/{catalog_name}` (GET)

Gets a list of both public and private entries in catalog_name under user_id. The list will have 50 entries per page. Search is sorted based on the query parameter.

**Query Parameters**:

- `page` (optional): The page number of the result.
- `opinion` (optional): Search for opinions containing a specific string.
- `order_by` (optional) the column to sort results by. Possible values: (Default) `title`, `relevant date`, `rating`
- `direction` (optional) The sort order of the result. Possible values: (Default) `asc`, `desc`

**Response**:

JSON object of the following:

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`results`: An array of JSON objects representing the entries returned by the query
The entries will be listed by all relevant information according to the type of entries

### `/entries/{type}/{user_id}/{catalog_name}/{entry_title}` (DELETE) 

Deletes the entry under user_id in catalog_name with the title entry_title.

**Response**:

`HTTP 204 No Content`

# Catalogs

### `/catalogs/{user_id}` (POST)

Creates a catalog for user_id. The request body has all the fields to be filled in for the catalog.

**Request**:

```json
{
  "title": "string",
  "type": "string", /* good values are “movies”, “books”, “games”, or "other" */
  "private": "boolean" /* true for private catalog, false for public */
}
```

**Response**:

`HTTP 201 Created`

### `/catalogs/{user_id}` (GET)

Searches through a user’s catalogs using (optional) specified queries.

**Query Parameters**:

`page` (optional): A specific page of catalogs in the query
`type` (optional): The type of catalog 
`order_by` (optional): A column to sort the results by (either `id` or `name`, default: `name`)
`direction` (optional): The order in which to display the results (`asc` or `desc`, default: `asc`)

**Response**:

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`results`: An array of JSON objects representing the catalogs returned by the query
The catalogs will be listed by `title`, `type`, and `private`

### `/catalogs/{user_id}` (DELETE)

Deletes the specified catalog by id from a user’s list of catalogs.

**Response**:

`HTTP 204 No Content`

### `/catalogs/{user_id}/{catalog_id}` (PUT)

Used to update the name or privacy of a catalog.

**Request**:

```json
{
  "name": "string",
  "private": "boolean"
}
```

**Response**:

`HTTP 202 Accepted`

# Following

### `/following/{user_id}` (POST) 

Adds the user by username to user_id’s following list.

**Request**:

```json
{
 "user_name": "string"
}
```

**Response**:

`HTTP 201 Created`

### `/following/{user_id}` (GET) 

Gets a list of all users that user_id is following. The list will have 25 entries per page.

**Query Parameters**:

- `page`: Specific page of results to query (Default: 1)
- `name`: (Optional) Filter results by name
- `direction`: Alphabetical order to display results by name (`asc` or `desc`)

**Response**:

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`content`: An array of JSON objects representing the catalogs returned by the query
The users will be listed by `name`

### `/following/{user_id}` (DELETE)

Delete the user by name from user_id's follow list.

**Request**:

```json
{
  "follower_name": "string"
}
```

**Response**:

`HTTP 204 No Content`


### `/following/{user_id}/search_catalogs` (GET)

Returns all public catalogs from follower_name

**Query Parameters**

`name` (optional): A username in the user's following list
`catalog_name` (optional): The specific name of a catalog
`direction` (optional): The order in which to display the results (`asc` or `desc`, default: `asc`)
`page` (optional): A specific page of catalogs in the query (default: 1)

**Response**:

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`content`: An array of JSON objects representing the catalogs returned by the query
The catalogs will be listed by `user`, `catalog_name`, and `type`

### `/following/{user_id}/search_entries` (GET)

Returns all entries in a followed user's public catalog where the recommend attribute is true.

**Query Parameters**

`page` (optional): A specific page of catalogs in the query (default: 1)
`following_name` (optional): A username in the user's following list
`catalog` (optional): The specific name of a catalog
`title` (optional): Filter by entry title
`order_by` (optional): Attribute in which to order the results by
`direction` (optional): The direction in which to order the results (`asc` or `desc`, default: `asc`)


**Response**:

A JSON response is produced with the following information:
`page`: Query page of results (limited to 25)
`max_page`: The maximum page of results determined by the amount of objects generated by a response
`content`: An array of JSON objects representing the entries returned by the query
The entries will be listed by `user`, `title`, and `type`

### `/following/{user_id}/follow_recommendations` (GET)

**Response**:

```json
[
  {
    "recommendation": "string: username"
  }
]
```
